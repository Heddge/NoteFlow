@page
@model NoteFlow.Pages.EditNoteModel
@{
    ViewData["Title"] = "EditNote";
    Layout = null;
}

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Редактор заметки</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: rgb(35, 35, 35);
            font-family: 'Century Gothic', Arial, sans-serif;
        }

        .top-bar {
            position: fixed;
            width: 100%;
            height: 30px;
            top: 0;
            left: 0;
            background-color: rgb(43, 43, 43);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-sizing: border-box;
            z-index: 10000;
            border-bottom: 1px solid #555;
            -webkit-app-region: drag;
        }

        .logo-container {
            display: flex;
            align-items: center;
        }

        .logo {
            width: 40px;
            height: 40px;
        }

        .top-bar-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            -webkit-app-region: no-drag;
        }

        .icon-button {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
            color: #B9B9B9;
            -webkit-app-region: no-drag;
        }

        .icon-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: #FFFFFF;
        }

        .close-btn:hover {
            background-color: #e74c3c;
            color: white;
        }

        .avatar-area {
            position: absolute;
            width: 20vw;
            height: calc(100vh - 60px);
            left: 0;
            top: 60px;
            background: #2B2B2B;
        }

        .main-content {
            position: absolute;
            width: 80vw;
            height: calc(100vh - 60px);
            left: 20vw;
            top: 60px;
            background: #303030;
            display: flex;
            flex-direction: column;
            padding: 2vw;
            box-sizing: border-box;
        }

        .note-background {
            position: absolute;
            width: 96%;
            height: 15%;
            left: 2%;
            top: 2%;
            background: #2B2B2B;
            border-radius: 15px;
        }

        .note-title-input {
            width: 100%;
            background: transparent;
            border: none;
            font-family: 'Century Gothic';
            font-weight: 700;
            font-size: 3vw;
            color: #B9B9B9;
            outline: none;
            margin-bottom: 2vh;
            padding: 1vh 0;
            position: relative;
            margin-left: 2vw;
        }

        .note-text-input {
            width: 100%;
            height: 80%;
            background: transparent;
            border: none;
            font-family: 'Century Gothic';
            font-weight: 400;
            font-size: 1.5vw;
            color: #B9B9B9;
            resize: none;
            outline: none;
            line-height: 1.5;
            margin-top: 10vh;
            margin-left: 2vw;
        }

        .note-title-input::placeholder,
        .note-text-input::placeholder {
            color: #B9B9B9;
        }

        .action-buttons {
            position: absolute;
            right: 1vw;
            top: 72vh;
            display: flex;
            flex-direction: column;
            gap: 1vh;
        }

        .action-button {
            width: 3vw;
            height: 3vw;
            border-radius: 50%;
            background: #393939;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .action-button:hover {
            background: #4a4a4a;
        }

        .button-icon {
            width: 1.5vw;
            height: 1.5vw;
            border: 0.2vw solid #BABABA;
        }

        .plus-icon {
            border: 0.2vw solid #BABABA;
            position: relative;
        }

        .plus-icon::before,
        .plus-icon::after {
            content: '';
            position: absolute;
            background: #BABABA;
        }

        .plus-icon::before {
            width: 0.2vw;
            height: 1vw;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .plus-icon::after {
            width: 1vw;
            height: 0.2vw;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .heart-icon {
            background: #BABABA;
            clip-path: path('M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z');
        }

        .save-icon {
            position: relative;
            background: #BABABA;
        }

        .save-icon::before {
            content: '';
            position: absolute;
            width: 0.8vw;
            height: 0.8vw;
            border: 0.2vw solid #393939;
            top: 0.2vw;
            left: 0.2vw;
        }

        .save-icon::after {
            content: '';
            position: absolute;
            width: 0.4vw;
            height: 0.4vw;
            background: #393939;
            top: 0.6vw;
            left: 0.6vw;
        }

        .logo {
            width: 40px;
            height: 40px;
            margin-right: 15px;
        }
    </style>
</head>

<body>
    <nav class="top-bar">
        <div class="logo-container">
            <img src="/Images/Logo.svg" class="logo" alt="NoteFlow" />
        </div>

        <div class="top-bar-actions">
            <button class="icon-button" title="Свернуть" id="minimizeBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M5 12h14" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>

            <button class="icon-button" title="Развернуть" id="maximizeBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="3" y="3" width="18" height="18" rx="2" stroke-width="2" />
                </svg>
            </button>

            <button class="icon-button close-btn" title="Закрыть" id="closeBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round" />
                </svg>
            </button>
        </div>
    </nav>

    <div class="avatar-area">
        <!-- Здесь будет сайдбар как на главной -->
    </div>

    <div class="main-content">
        <div class="note-background"></div>
        <input type="text" class="note-title-input" placeholder="Новая заметка" maxlength="50">
        <textarea class="note-text-input" placeholder="Введите ваш текст..."></textarea>

        <div class="action-buttons">
            <button class="action-button">
                <div class="button-icon plus-icon"></div>
            </button>
            <button class="action-button">
                <div class="button-icon heart-icon"></div>
            </button>
            <button class="action-button">
                <div class="button-icon save-icon"></div>
            </button>
        </div>
    </div>

    <<script>
        // Проверяем что мы в Electron среде
        if (typeof require !== 'undefined') {
        const { ipcRenderer } = require('electron');

        document.getElementById('minimizeBtn').addEventListener('click', () => {
        ipcRenderer.send('minimize-window');
        });

        document.getElementById('maximizeBtn').addEventListener('click', () => {
        ipcRenderer.send('maximize-window');
        });

        document.getElementById('closeBtn').addEventListener('click', () => {
        ipcRenderer.send('close-window');
        });
        } else {
        console.log('Not in Electron environment');
        }
        </script>
</body>

</html>